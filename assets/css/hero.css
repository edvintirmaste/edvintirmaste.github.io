/* Edvin Portfolio — hero.css (v29.27)
   v29.22 — comet on ::after, head down, robust path fallbacks.
   v29.26 — temp one-ended shape.
   v29.27 — Single-ended pill (rectangle + one circular short side) with full controls.
*/

/* ---- Layout lock ---- */
.hero{
  position: relative !important;
  margin-top: var(--header-h) !important;
  height: calc(100svh - var(--header-h)) !important;
  scroll-snap-align: start;
  z-index: 1;

  /* ===== Comet sizing/placement (unchanged) ===== */
  --comet-size: clamp(120px, 12vw, 160px);
  --comet-bottom: clamp(18px, 4.4vw, 42px);
  --comet-rot: 0deg; /* head DOWN (sprite native) */

  /* =========  ONE-ENDED PILL — YOUR CONTROLS  =========
     The mask builds a rectangle + one semicircle on the chosen short side.
     - --shape-w:    total width of the pill box
     - --shape-h:    total height of the pill box (this is also the semicircle DIAMETER)
     - --cap-r:      semicircle RADIUS (typically calc(var(--shape-h)/2) for perfect half-circle)
     - --shape-left: left anchor of the pill (px/%)
     - --shape-top:  top anchor of the pill (px/%)
     - --tx / --ty:  translate offsets (use -50%/-50% to anchor by center)
     - --shape-rotate: rotate the whole pill (e.g., 0deg/90deg)
     - --shape-color: fill color of the pill
     Orientation: default RIGHT-capped. Switch via [data-cap="left|top|bottom"] on .hero
  */
  --shape-w: clamp(240px, 32vw, 520px);
  --shape-h: clamp(36px, 4.6vw, 72px);
  --cap-r: calc(var(--shape-h) / 2);
  --shape-color: #fff;

  --shape-left: 50%;
  --shape-top: 50%;
  --tx: -50%;
  --ty: -50%;
  --shape-rotate: 0deg;
}

/* ===== Split layout & visuals (unchanged blocks) ===== */
.split-50{
  position:relative;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:0;
  inline-size:100%; block-size:100%;
}
.split-50::after{
  content:"";
  position:absolute; inset-block:0; inset-inline-start:50%;
  width:1px; transform:translateX(-.5px);
  background: linear-gradient(to bottom, transparent, rgba(255,255,255,.18), transparent);
  opacity:var(--divider-opacity);
  pointer-events:none;
}
.split-50::before{
  content:"";
  position:absolute; inset-block:0; inset-inline-start:50%;
  width: var(--divider-glow-width); transform:translateX(-50%);
  background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,.45), rgba(255,255,255,0));
  filter: blur(var(--divider-glow-blur));
  opacity:.42; pointer-events:none;
}

.corner-intro{
  position:absolute; z-index:2; top: var(--intro-top);
  width: var(--intro-width);
  line-height:1.48;
  font-size: clamp(14px, 1.05vw, 16px);
  color: rgba(233,233,238,.96);
  text-shadow: 0 0 10px rgba(0,0,0,.45);
  pointer-events:none;
  text-align: justify; text-justify: inter-word;
  -webkit-hyphens:auto; hyphens:auto;
  overflow-wrap:anywhere; text-wrap: pretty;
  padding-left:  calc(var(--intro-rail-gap) + var(--intro-rail-w));
  padding-right: calc(var(--intro-rail-gap) + var(--intro-rail-w));
}
.corner-intro.left  { left:  calc(50% - var(--intro-gap) - var(--intro-width));  text-align-last:left; }
.corner-intro.right { right: calc(50% - var(--intro-gap) - var(--intro-width));  text-align-last:right; }
.corner-intro::before,
.corner-intro::after{
  content:""; position:absolute; width: calc(var(--intro-glow-w) + var(--intro-rail-w));
  height: var(--rail-height);
  top: calc(50% + var(--rail-offset)); transform: translateY(-50%);
  pointer-events:none; background-repeat:no-repeat;
}
.corner-intro::before{
  left:0;
  background:
    linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,var(--intro-rail-alpha)), rgba(255,255,255,0))
      left center / var(--intro-rail-w) 100% no-repeat,
    radial-gradient(100% 60% at left center, rgba(var(--brand-glow1-rgb), .22) 0, rgba(0,0,0,0) 65%);
}
.corner-intro::after{
  right:0;
  background:
    linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,var(--intro-rail-alpha)), rgba(255,255,255,0))
      right center / var(--intro-rail-w) 100% no-repeat,
    radial-gradient(100% 60% at right center, rgba(var(--brand-glow2-rgb), .22) 0, rgba(0,0,0,0) 65%);
}

.half{
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:12px;
  inline-size:100%; block-size:100%; text-decoration:none; color:var(--fg);
  background: transparent; -webkit-backdrop-filter: none; backdrop-filter: none;
  transition: background-color .25s ease, backdrop-filter .25s ease, transform .25s ease, box-shadow .25s ease, opacity .25s ease;
  position:relative; isolation:isolate; padding: 0 clamp(18px, 3.5vw, 48px);
}
.half:hover{
  background: var(--frost-bg);
  -webkit-backdrop-filter: blur(var(--frost-blur)) saturate(115%);
  backdrop-filter: blur(var(--frost-blur)) saturate(115%);
  box-shadow: var(--frost-shadow);
}

/* ===== Edge chevrons (unchanged) ===== */
.hero{
  --edge-halo-opacity: .10;
  --edge-glow-opacity: .14;
  --edge-stroke: #6a6af7;
  --edge-lift: 22%;
  --edge-lift-hover: 30%;
  --edge-stroke-w: 3.6;
}
.edge{
  position:absolute; top: calc(50% - var(--header-h) / 2);
  transform: translateY(-50%); z-index:2;
  width:64px; height:64px; pointer-events:auto; cursor:pointer;
}
.edge::before, .edge::after{
  content:""; position:absolute; inset:50% auto auto 50%; transform: translate(-50%,-50%);
  border-radius:50%; pointer-events:none;
}
.edge::before{ width:72px; height:72px; background: radial-gradient(closest-side, rgba(255,255,255,.6), rgba(255,255,255,0) 75%); filter: blur(8px); opacity: var(--edge-halo-opacity); }
.edge::after { width:96px; height:96px; background: radial-gradient(closest-side, rgba(102,120,255,.22), rgba(0,0,0,0) 70%); filter: blur(10px); opacity: var(--edge-glow-opacity); }
.edge svg{
  width:100%; height:100%; display:block;
  stroke: var(--edge-stroke); stroke-width: var(--edge-stroke-w);
  fill:none; stroke-linecap:round; stroke-linejoin:round;
  transition: transform .2s ease, filter .2s ease, opacity .2s ease;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.6)) drop-shadow(0 6px 15px rgba(0,0,0,.30));
  transform: scale(var(--edge-scale, 1));
}
@supports (color: color-mix(in srgb, white, black)){
  .edge svg{
    stroke: color-mix(in srgb, var(--edge-stroke) calc(100% - var(--edge-lift)), white var(--edge-lift));
  }
  .edge:hover svg{
    stroke: color-mix(in srgb, var(--edge-stroke) calc(100% - var(--edge-lift-hover)), white var(--edge-lift-hover));
  }
}
.edge-left{ left:12px } .edge-right{ right:12px }
.edge:hover{ --edge-scale: 1.18; }
.edge:hover::before{ filter: blur(6px); opacity: calc(var(--edge-halo-opacity) * 1.25); }
.edge:hover::after{ opacity: calc(var(--edge-glow-opacity) * 1.25); }
.edge:hover svg{ filter: drop-shadow(0 1px 2px rgba(0,0,0,.7)) drop-shadow(0 8px 22px rgba(0,0,0,.35)); }

/* ===== Titles & bullets (unchanged) ===== */
.half h2{
  margin:0 0 10px 0;
  font-family:"Space Grotesk", Inter, system-ui;
  font-size: clamp(28px, 3.6vw, 56px);
  letter-spacing:.10em; text-transform:uppercase;
  text-shadow:0 2px 18px rgba(0,0,0,.45);
  pointer-events:none; text-align:center;
}
.bullets{
  margin:0; padding:0; list-style:none;
  display:flex; flex-wrap:wrap; justify-content:center; gap:.35rem .9rem;
  color:var(--muted); font-size: clamp(12px, 1vw, 15px); line-height:1.35;
  min-height: calc(1.35em * 2 + 6px); text-align:center; opacity:.95;
}
.bullets li{ display:inline-flex; align-items:center; white-space:nowrap; }
.bullets li:first-child::before{ content:""; margin:0; }
.bullets li::before{ content:"•"; opacity:.7; margin-right:.55rem; }

/* ===== Responsive (hero only) ===== */
@media (max-width: 900px){
  .corner-intro{
    position:static; margin: 10px 16px 0;
    width: min(92vw, var(--intro-width));
    text-align:left; text-align-last:left;
    background: none; border-radius: 0; padding: 0;
  }
  .corner-intro::before, .corner-intro::after{ display:none; }
  .split-50{ grid-template-columns: 1fr; grid-template-rows: 1fr 1fr; }
  .split-50::after, .split-50::before{ display:none; }
  .edge-left{ left:10px } .edge-right{ right:10px }
  .bullets{ min-height: 0; }

  .edge{ width:56px; height:56px; }
  .edge::before{ width:62px; height:62px; }
  .edge::after{ width:84px; height:84px; }
}

/* ===== Hero vertical shift (content-only) ===== */
.hero { --hero-shift: 10vh; }
.hero .half > * { transform: translateY(var(--hero-shift)); }
.hero .corner-intro { transform: translateY(var(--hero-shift)); }
@media (max-width: 1200px){ .hero { --hero-shift: 8vh; } }
@media (max-width: 900px){  .hero { --hero-shift: 0; } }
@media (max-width: 700px){  .hero { --hero-shift: 0; } }

/* ===================================================== */
/* ========== ONE-ENDED PILL (mask on ::before) ========= */
/* Default: RIGHT-capped (rounded end on the right)      */
/* ===================================================== */
.hero::before{
  content:"";
  position:absolute;
  left: var(--shape-left);
  top: var(--shape-top);
  width: var(--shape-w);
  height: var(--shape-h);
  transform-origin: 50% 50%;
  transform: translate(var(--tx), var(--ty)) rotate(var(--shape-rotate));
  background: var(--shape-color);
  pointer-events:none;
  z-index:0;

  /* cap diameter derived from height; ensure width > height for a proper body */
  --cap-d: calc(2 * var(--cap-r)); /* normally equals var(--shape-h) */

  /* Rectangle body + right semicircle cap */
  -webkit-mask:
    linear-gradient(#000 0 0) left   / calc(100% - var(--cap-d)) 100% no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) right  / var(--cap-d) var(--cap-d) no-repeat;
          mask:
    linear-gradient(#000 0 0) left   / calc(100% - var(--cap-d)) 100% no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) right  / var(--cap-d) var(--cap-d) no-repeat;
}

/* LEFT-capped */
.hero[data-cap="left"]::before{
  -webkit-mask:
    linear-gradient(#000 0 0) right  / calc(100% - var(--cap-d)) 100% no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) left   / var(--cap-d) var(--cap-d) no-repeat;
          mask:
    linear-gradient(#000 0 0) right  / calc(100% - var(--cap-d)) 100% no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) left   / var(--cap-d) var(--cap-d) no-repeat;
}

/* TOP-capped (rounded short side at the top) */
.hero[data-cap="top"]::before{
  -webkit-mask:
    linear-gradient(#000 0 0) bottom / 100% calc(100% - var(--cap-d)) no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) top    / var(--cap-d) var(--cap-d) no-repeat;
          mask:
    linear-gradient(#000 0 0) bottom / 100% calc(100% - var(--cap-d)) no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) top    / var(--cap-d) var(--cap-d) no-repeat;
}

/* BOTTOM-capped */
.hero[data-cap="bottom"]::before{
  -webkit-mask:
    linear-gradient(#000 0 0) top    / 100% calc(100% - var(--cap-d)) no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) bottom / var(--cap-d) var(--cap-d) no-repeat;
          mask:
    linear-gradient(#000 0 0) top    / 100% calc(100% - var(--cap-d)) no-repeat,
    radial-gradient(closest-side, #000 98%, transparent 100%) bottom / var(--cap-d) var(--cap-d) no-repeat;
}

/* ===== Comet artwork (unchanged) ===== */
.hero::after{
  content:"";
  position:absolute; left:50%; bottom:var(--comet-bottom);
  width:var(--comet-size); aspect-ratio:1/1;
  transform-origin: 50% 50%;
  transform: translateX(-50%) rotate(var(--comet-rot));
  background:
    center / contain no-repeat url("../svg/comet.svg"),
    center / contain no-repeat url("../comet.svg"),
    center / contain no-repeat url("../../assets/svg/comet.svg"),
    center / contain no-repeat url("../../assets/comet.svg"),
    center / contain no-repeat url("../svg/comet.png"),
    center / contain no-repeat url("../comet.png");
  pointer-events:none; z-index:1;
}
