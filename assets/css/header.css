/* Edvin Portfolio — header.css (v31.4)
   - Same as v31.3 (refraction overlay unchanged).
   - CHANGE: Wordmark Duotone offset set to 2px (was 3px).

   Notes:
   - No HTML/JS edits needed.
   - Applies to .brand, .wordmark, or any element with class="wm-duo".
*/

/* ===== Header bar (baseline) ===== */
header.site-header{
  position: fixed;
  inset: 0 0 auto 0;
  height: var(--header-h);
  z-index: 20;
  background: linear-gradient(
    to bottom,
    rgba(2, 2, 28, var(--bar-top)),
    rgba(2, 2, 28, var(--bar-btm))
  );
  backdrop-filter: blur(var(--bar-blur)) saturate(var(--bar-sat));
  -webkit-backdrop-filter: blur(var(--bar-blur)) saturate(var(--bar-sat));
  isolation: isolate;
  overflow: hidden; /* clip the SVG to a perfect rectangle */
}

/* ===== Refraction tokens (unchanged) ===== */
:root{
  /* parallax offsets */
  --fracture-offset-x: 22px;
  --fracture-offset-y: 12px;

  /* render far past the bar; the SVG will clip it */
  --fracture-overscan: 160;

  /* look/strength */
  --fracture-opacity: 0.90;
  --fracture-blend: normal;

  /* filter params (JS reads these) */
  --fracture-strength: 32;
  --fracture-frequency: 0.0115;

  /* Per-edge fade thickness (TOP=0 to keep top edge fully covered) */
  --fracture-edge-top: 0px;
  --fracture-edge-bottom: 6px;
  --fracture-edge-left: 8px;
  --fracture-edge-right: 8px;

  /* seam fade under bar (off) */
  --fade-depth: 0px;

  /* ===== Wordmark Duotone tokens ===== */
  --wm-duo-offset: 2px;                    /* ← you asked for 2px */
  --wm-duo-cyan:   rgba(160,200,255,.80);
  --wm-duo-yellow: rgba(247,236,120,.78);
  --wm-duo-crisp:  rgba(0,0,0,.30);
}

/* ===== Refraction SVG overlay (from v31.2) ===== */
header.site-header > svg.refract-svg{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  pointer-events: none;
  z-index: 0;
  opacity: var(--fracture-opacity);
  mix-blend-mode: var(--fracture-blend);

  /* Per-edge mask: TOP=0 so the top is fully covered and perfectly straight */
  -webkit-mask-image:
    linear-gradient(to bottom,
      transparent 0,
      #000 var(--fracture-edge-top),
      #000 calc(100% - var(--fracture-edge-bottom)),
      transparent 100%),
    linear-gradient(to right,
      transparent 0,
      #000 var(--fracture-edge-left),
      #000 calc(100% - var(--fracture-edge-right)),
      transparent 100%);
  -webkit-mask-composite: source-in;

          mask-image:
    linear-gradient(to bottom,
      transparent 0,
      #000 var(--fracture-edge-top),
      #000 calc(100% - var(--fracture-edge-bottom)),
      transparent 100%),
    linear-gradient(to right,
      transparent 0,
      #000 var(--fracture-edge-left),
      #000 calc(100% - var(--fracture-edge-right)),
      transparent 100%);
  mask-composite: intersect;
}

/* ===== Optional seam fade (off by default) ===== */
header.site-header::after{
  content: "";
  position: absolute;
  left: 0; right: 0; top: 100%;
  height: var(--fade-depth);
  background: linear-gradient(to bottom, rgba(2,2,28,var(--bar-btm)), rgba(2,2,28,0));
  backdrop-filter: blur(var(--bar-blur)) saturate(var(--bar-sat));
  -webkit-backdrop-filter: blur(var(--bar-blur)) saturate(var(--bar-sat));
  pointer-events: none;
  z-index: 0;
}

/* ===== Nav container ===== */
.nav{
  height: var(--header-h);
  display: flex;
  align-items: center;
  justify-content: center;
  padding-inline: clamp(16px, 5vw, 64px);
  position: relative;
  z-index: 2; /* above the SVG */
}

/* ===== Brand / wordmark =====
   Clean duotone offset — cyan up/left + yellow down/right + crisp edge.
*/
.brand,
.wordmark,
.wm-duo{
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: var(--word-gap, 0.6em);
  text-transform: uppercase;
  white-space: nowrap;
  user-select: none;
  color: #e8ecf6;
  text-shadow:
    calc(var(--wm-duo-offset) * -1) calc(var(--wm-duo-offset) * -1) 0 var(--wm-duo-cyan),
    var(--wm-duo-offset) var(--wm-duo-offset) 0 var(--wm-duo-yellow),
    0 0 0.5px var(--wm-duo-crisp);
}

/* Optional per-letter spans */
.brand span{
  position: relative;
  display: inline-block;
  font-family: "Space Grotesk", Inter, system-ui;
  font-weight: 700;
  font-size: var(--brand-size, clamp(14px, 1.8vw, 20px));
  line-height: 1;
}

/* Disable any old blur/glow pseudo under the wordmark */
.brand::after{ content: none !important; }

/* Fixed spacer if markup uses <span class="space"></span> */
.brand .space{ flex: 0 0 var(--word-gap, 0.6em); }

/* ===== Small screens (optional tweak) ===== */
@media (max-width: 639.98px){
  :root{
    /* keep 2px unless you want 1px on phones */
    /* --wm-duo-offset: 1px; */
  }
}
